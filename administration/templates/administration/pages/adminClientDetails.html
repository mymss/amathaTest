<!-- Header -->

{% extends 'shop/layouts/base.html' %}
{% load static %}

<!-- Body -->
{% block content %}


    <br/><br/><br/>

    <div class="container-xxl" style="margin-left: 20%; ">
        <div class="container-sm">

            <h2>Détails Client et Commande</h2>
            <hr/>

            <script>
                var cptCommande = 0;
                const commande = "commande";
                const commandes = "commandes";
            </script>


            {% for com in commandes %}

                <script>
                    var cptCommande = cptCommande + 1;
                </script>

            {% endfor %}

            <p>
                <span style="font-weight: bold">{{ detailsClient.prenom }} {{ detailsClient.nom }}</span> a commandé
                <span style="color: #CC3434; font-weight: bold">
                        <script>
                            document.write(cptCommande)
                        </script>
                    </span>

                <script>
                    if (cptCommande <= 1) {
                        document.write(commande)
                    } else {
                        document.write(" ", commandes)
                    }
                </script>
            </p>

            <table class="table table-bordered" style="width: 1000px;">
                <tr>
                    <th>N° commande</th>
                    <th>Total</th>
                    <th>Satut</th>
                    <th colspan="2">Date de commande</th>
                </tr>

                {% for com in commandes %}
                    <tr>
                        <td>{{ com.comNumero }}</td>

                        {% for totalfinal in totalCommande %}

                            {% if forloop.counter == forloop.parentloop.counter %}

                                <td for="insertStock" class="col-form-label">
                                    {{ totalfinal }}
                                </td>

                            {% endif %}

                        {% endfor %}

                        {% if com.envoye == True %}
                            <td>Envoyé</td>
                        {% else %}
                            <td>En attente</td>
                        {% endif %}

                        <td>{{ com.comDate }}</td>

                        <td align="right">
                            <a href="{% url 'administration:adminCommandeDetails' com.id %}"
                               class="btn-outline-secondary btn-sm"
                               class="text-decoration-none">Détails commande</a>
                        </td>
                    </tr>


                {% endfor %}
            </table>

        </div>
    </div>
    <br/><br/><br/>
{% endblock content %}

<!-- Footer -->
{% include 'shop/layouts/footer.html' %}